<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - BrightFund</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>

        :root {
            --brand-blue: #4e73df;
            --brand-green: #1cc88a;
            --soft-bg: #f7f9ff;
            --text-dark: #1f2d3d;
            --text-light: #4b5563;
        }

        body {
            margin: 0;
            font-family: "Segoe UI", sans-serif;
            background: linear-gradient(135deg, #eef2fb, #f9f9fb);
            color: #333;
        }

        /* ----- NAVBAR ----- */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        /* ----- BANNER ----- */
        .banner {
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--brand-blue), var(--brand-green));
            color: white;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .banner h2 {
            margin: 0;
            font-size: 36px;
            font-weight: 700;
            animation: fadeSlide 1.2s ease-out;
        }

        .banner p {
            margin-top: 10px;
            font-size: 18px;
            opacity: 0.95;
            animation: fadeSlide 1.6s ease-out;
        }

        .banner img {
            width: 100px;
            margin-top: 15px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeSlide {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MAIN DASHBOARD LAYOUT */
        .dashboard-wrapper {
            display: flex;
            gap: 25px;
            padding: 40px 20px;
            max-width: 1200px;
            margin: auto;
            flex-wrap: wrap;
        }

        /* PROFILE SIDEBAR */
        .profile-card {
            flex: 0 0 23%;
            background: #fff;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            text-align: center;
        }

        .profile-card img {
            width: 90px;
            margin-bottom: 12px;
            border-radius: 50%;
            background: #eef2ff;
            padding: 10px;
        }

        .profile-card h3 {
            font-size: 1.3rem;
            color: #4e73df;
            margin-bottom: 5px;
        }

        .profile-info {
            margin-top: 15px;
            text-align: left;
        }

        .profile-info p {
            font-size: .95rem;
            padding: 6px 0;
            border-bottom: 1px solid #eee;
            margin: 0;
        }

        /* MAIN DASHBOARD RIGHT SIDE */
        .dashboard-content {
            flex: 1;
            background: #fff;
            padding: 30px;
            border-radius: 18px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        .dashboard-content h3 {
            color: #4e73df;
            font-weight: 700;
            margin-bottom: 15px;
        }

        /* BUTTONS */
        .btn-gradient {
            display: inline-block;
            padding: 12px 24px;
            margin: 8px 6px;
            font-size: 0.95rem;
            font-weight: 600;
            text-decoration: none;
            background: linear-gradient(135deg, #4e73df, #1cc88a);
            color: white;
            border-radius: 10px;
            transition: all 0.25s ease;
            box-shadow: 0 4px 12px rgba(78,115,223,0.25);
        }

        .btn-gradient:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(78,115,223,0.35);
            text-decoration: none;
        }

        /* APPLICATION TABLE */
        .table-card {
            margin-top: 20px;
            background: #ffffff;
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th {
            padding: 14px;
            background: #4e73df;
            color: #fff;
            font-weight: 600;
            text-align: left;
            font-size: 0.95rem;
        }

        table td {
            padding: 14px;
            background: #ffffff;
            border-bottom: 1px solid #e8ecf7;
            font-size: 0.95rem;
        }

        table tbody tr:nth-child(even) td {
            background: #f8faff;
        }

        table tbody tr:hover td {
            background: #eef3ff;
            transition: 0.25s;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 10px;
            color: #fff;
            font-size: .8rem;
            font-weight: 600;
        }
        .status-reviewing { background: #ff9f43; }
        .status-approved { background: #28c76f; }
        .status-rejected { background: #ff4e4e; }

        /* NOTIFICATION */
        #alertBox {
            max-width: 700px;
            margin: 20px auto -10px auto;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            background: #d9ffdf;
            color: #1b8a3a;
            animation: fadeIn .6s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-12px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>

<body>

<!-- NAVBAR -->
<div th:replace="fragments/header :: header"></div>

<!-- BANNER -->
<div class="banner">
    <h2>Welcome, <span th:text="${name}"></span> ðŸ‘‹</h2>
    <p>Your  Dashboard</p>
    <!-- Optional Banner Image -->
    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Banner Icon">
</div>

<!-- SUCCESS MESSAGE -->
<div id="alertBox" th:if="${msg} == 'updated'">
    âœ” Profile updated successfully!
</div>

<div class="dashboard-wrapper">

    <!-- PROFILE SIDEBAR -->
    <div class="profile-card">
        <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="User">
        <h3 th:text="${name}">Student Name</h3>

        <div class="profile-info">
            <p><strong>Course:</strong> <span th:text="${course}"></span></p>
            <p><strong>Semester:</strong> <span th:text="${semester}"></span></p>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="dashboard-content">

        <!-- IF NOT APPLIED -->
        <div th:if="${status == 'NOT_SUBMITTED'}">
            <a href="/apply" class="btn-gradient">Apply for Scholarship</a>
        </div>

        <!-- IF APPLIED -->
        <div th:if="${status != 'NOT_SUBMITTED' and status != 'SUCCESSFUL'}">
            <h3>Application Status</h3>

            <div class="table-card">
                <table>
                    <thead>
                    <tr>
                        <th>Email</th>
                        <th>Status</th>
                        <th>Date Of Submission</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td th:text="${email}"></td>
                        <td>
                                <span th:classappend="'status-badge ' +
                                   (status=='REVIEWING' ? 'status-reviewing' :
                                   (status=='APPROVED' ? 'status-approved' : 'status-rejected'))"
                                      th:text="${status}">
                                </span>
                        </td>
                        <td th:text="${date}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- IF SUCCESSFUL -->
        <div th:if="${status == 'SUCCESSFUL'}">
            <h3>Your Options</h3>

            <a href="/achievements" class="btn-gradient">Achievements</a>
            <a href="/documents" class="btn-gradient">Documents</a>
            <a href="/semester" class="btn-gradient">Semester</a>
            <a href="/updateprofile" class="btn-gradient">Update Profile</a>
        </div>

    </div>
</div>

<script>
    // Fade out the alert box
    window.addEventListener("DOMContentLoaded", () => {
        const box = document.getElementById("alertBox");
        if (box) {
            setTimeout(() => {
                box.style.opacity = "0";
                setTimeout(() => box.remove(), 600);
            }, 4000);
        }
    });
</script>

</body>
</html>
